import routerReport from './router-report.js'
let popCount = 0

const Login = resolve => {
  require.ensure(['components/business-modules/login/index.vue'], () => {
    resolve(require('components/business-modules/login/index.vue'))
  })
}
// 业务模块 start

const index = resolve => {
  require.ensure(['components/ui-modules/index.vue'], () => {
    resolve(require('components/ui-modules/index.vue'))
  })
}
const workbench = resolve => {
  require.ensure(['components/business-modules/workbenches/index.vue'], () => {
    resolve(require('components/business-modules/workbenches/index.vue'))
  })
}
const call = resolve => {
  require.ensure(['components/business-modules/call/index.vue'], () => {
    resolve(require('components/business-modules/call/index.vue'))
  })
}
const webchat = resolve => {
  require.ensure(['components/business-modules/webchat/index.vue'], () => {
    resolve(require('components/business-modules/webchat/index.vue'))
  })
}
const email = resolve => {
  require.ensure(['components/business-modules/email/index.vue'], () => {
    resolve(require('components/business-modules/email/index.vue'))
  })
}
const customer = resolve => {
  require.ensure(['components/business-modules/customer/index.vue'], () => {
    resolve(require('components/business-modules/customer/index.vue'))
  })
}
const Business = resolve => {
  require.ensure(['components/business-modules/business/index.vue'], () => {
    resolve(require('components/business-modules/business/index.vue'))
  })
}
const km = resolve => {
  require.ensure(['components/business-modules/km/index.vue'], () => {
    resolve(require('components/business-modules/km/index.vue'))
  })
}
const KmDetail = resolve => {
  require.ensure(['components/business-modules/km/km-detail/index.vue'], () => {
    resolve(require('components/business-modules/km/km-detail/index.vue'))
  })
}
const report = resolve => {
  require.ensure(['components/business-modules/report/index.vue'], () => {
    resolve(require('components/business-modules/report/index.vue'))
  })
}
const monitor = resolve => {
  require.ensure(['components/business-modules/monitor/index.vue'], () => {
    resolve(require('components/business-modules/monitor/index.vue'))
  })
}
const questionnaire = resolve => {
  require.ensure(['components/business-modules/questionnaire/index.vue'], () => {
    resolve(require('components/business-modules/questionnaire/index.vue'))
  })
}
const questionSummary = resolve => {
  require.ensure(['components/business-modules/questionnaire/QuestionSummary.vue'], () => {
    resolve(require('components/business-modules/questionnaire/QuestionSummary.vue'))
  })
}
const questionDistribute = resolve => {
  require.ensure(['components/business-modules/questionnaire/QuestionDistribute.vue'], () => {
    resolve(require('components/business-modules/questionnaire/QuestionDistribute.vue'))
  })
}
const qualityCheck = resolve => {
  require.ensure(['components/business-modules/qualityCheck/index.vue'], () => {
    resolve(require('components/business-modules/qualityCheck/index.vue'))
  })
}
const qualityCheckDetail = resolve => {
  require.ensure(['components/business-modules/qualityCheck/QualityCheck.vue'], () => {
    resolve(require('components/business-modules/qualityCheck/QualityCheck.vue'))
  })
}
const qualityCheckResult = resolve => {
  require.ensure(['components/business-modules/qualityCheck/QualityCheckResult.vue'], () => {
    resolve(require('components/business-modules/qualityCheck/QualityCheckResult.vue'))
  })
}
const qualityCheckAgent = resolve => {
  require.ensure(['components/business-modules/qualityCheck/QualityCheckAgent.vue'], () => {
    resolve(require('components/business-modules/qualityCheck/QualityCheckAgent.vue'))
  })
}
const qualityCheckTask = resolve => {
  require.ensure(['components/business-modules/qualityCheck/QualityCheckTask.vue'], () => {
    resolve(require('components/business-modules/qualityCheck/QualityCheckTask.vue'))
  })
}
const qualityCheckCycle = resolve => {
  require.ensure(['components/business-modules/qualityCheck/QualityCheckCycle.vue'], () => {
    resolve(require('components/business-modules/qualityCheck/QualityCheckCycle.vue'))
  })
}
const misscall = resolve => {
  require.ensure(['components/business-modules/misscall/index.vue'], () => {
    resolve(require('components/business-modules/misscall/index.vue'))
  })
}
const sms = resolve => {
  require.ensure(['components/business-modules/sms/index.vue'], () => {
    resolve(require('components/business-modules/sms/index.vue'))
  })
}
const urlInterface = resolve => {
  require.ensure(['components/business-modules/interface/index.vue'], () => {
    resolve(require('components/business-modules/interface/index.vue'))
  })
}
const config = resolve => {
  require.ensure(['components/business-modules/config/index.vue'], () => {
    resolve(require('components/business-modules/config/index.vue'))
  })
}
const CustSummary = resolve => {
  require.ensure(['components/business-modules/customer/CustSummary.vue'], () => {
    resolve(require('components/business-modules/customer/CustSummary.vue'))
  })
}
const AddCustomers = resolve => {
  require.ensure(['components/business-modules/customer/AddCustomers.vue'], () => {
    resolve(require('components/business-modules/customer/AddCustomers.vue'))
  })
}
const AddCustomer = resolve => {
  require.ensure(['components/business-modules/customer/AddCustomer.vue'], () => {
    resolve(require('components/business-modules/customer/AddCustomer.vue'))
  })
}
const MergeCustomers = resolve => {
  require.ensure(['components/business-modules/customer/MergeCustomers.vue'], () => {
    resolve(require('components/business-modules/customer/MergeCustomers.vue'))
  })
}
const CustomizeFastSearch = resolve => {
  require.ensure(['components/business-modules/customer/CustomizeFastSearch.vue'], () => {
    resolve(require('components/business-modules/customer/CustomizeFastSearch.vue'))
  })
}
const CustomizeExport = resolve => {
  require.ensure(['components/business-modules/customer/CustomizeExport.vue'], () => {
    resolve(require('components/business-modules/customer/CustomizeExport.vue'))
  })
}
const CustomizelistQuery = resolve => {
  require.ensure(['components/business-modules/customer/CustomizelistQuery.vue'], () => {
    resolve(require('components/business-modules/customer/CustomizelistQuery.vue'))
  })
}
const WebchatSummary = resolve => {
  require.ensure(['components/business-modules/webchat/WebchatSummary.vue'], () => {
    resolve(require('components/business-modules/webchat/WebchatSummary.vue'))
  })
}
const EmailSummary = resolve => {
  require.ensure(['components/business-modules/email/EmailSummary.vue'], () => {
    resolve(require('components/business-modules/email/EmailSummary.vue'))
  })
}
const BusinessSummary = resolve => {
  require.ensure(['components/business-modules/business/BusinessSummary.vue'], () => {
    resolve(require('components/business-modules/business/BusinessSummary.vue'))
  })
}
const CallSummary = resolve => {
  require.ensure(['components/business-modules/call/CallSummary.vue'], () => {
    resolve(require('components/business-modules/call/CallSummary.vue'))
  })
}
const CdrCallSummary = resolve => {
  require.ensure(['components/business-modules/call/CdrCallSummary.vue'], () => {
    resolve(require('components/business-modules/call/CdrCallSummary.vue'))
  })
}
const CdrCallBlank = resolve => {
  require.ensure(['components/public-modules/contact-summary/CdrCallBlank.vue'], () => {
    resolve(require('components/public-modules/contact-summary/CdrCallBlank.vue'))
  })
}
const Blank = resolve => {
  require.ensure(['components/public-modules/contact-summary/Blank.vue'], () => {
    resolve(require('components/public-modules/contact-summary/Blank.vue'))
  })
}
const monitorTable = resolve => {
  require.ensure(['components/business-modules/monitor/MonitorTable.vue'], () => {
    resolve(require('components/business-modules/monitor/MonitorTable.vue'))
  })
}
const monitorChart = resolve => {
  require.ensure(['components/business-modules/monitor/MonitorChart.vue'], () => {
    resolve(require('components/business-modules/monitor/MonitorChart.vue'))
  })
}
const smsImportDetail = resolve => {
  require.ensure(['components/business-modules/sms/sms-import/smsImportDetail.vue'], () => {
    resolve(require('components/business-modules/sms/sms-import/smsImportDetail.vue'))
  })
}
const smsImportAddTemplate = resolve => {
  require.ensure(['components/business-modules/sms/sms-import/smsImportAddTemplate.vue'], () => {
    resolve(require('components/business-modules/sms/sms-import/smsImportAddTemplate.vue'))
  })
}
const smsTemplate = resolve => {
  require.ensure(['components/business-modules/sms/SmsTemplate.vue'], () => {
    resolve(require('components/business-modules/sms/SmsTemplate.vue'))
  })
}
// 业务模块 end

const routers = [{
  path: '/login',
  name: 'login',
  component: Login,
  meta: {
    title: '登录'
  }
}, {
  path: '/index',
  component: index,
  children: [
    {
      path: '',
      redirect: 'workbench'
    }, {
      path: 'km',
      components: {
        default: km
      },
      children: [
        {
          path: 'blank',
          component: Blank,
          meta: {
            title: '知识库'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/km/:kmType/:kmId',
          component: KmDetail,
          meta: {
            title: '知识库'
          }
        }
      ],
      meta: {
        title: '知识库'
      }
    }, {
      path: 'business',
      component: Business,
      children: [
        {
          path: '',
          component: Blank,
          meta: {
            title: '工单'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/business/:tabType/:id/:customerId',
          component: BusinessSummary,
          meta: {
            title: '工单'
          }
        }
      ]
    }, {
      path: 'customer',
      component: customer,
      meta: {
        title: '客户'
      },
      children: [
        {
          path: '',
          component: Blank,
          meta: {
            title: '客户'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/customer/add',
          component: AddCustomers,
          meta: {
            title: '添加客户'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/customer/merge',
          component: MergeCustomers,
          meta: {
            title: '合并客户'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/customer/customize',
          component: CustomizeFastSearch,
          meta: {
            title: '自定义快捷搜索'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/customer/export',
          component: CustomizeExport,
          meta: {
            title: '导出'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/customer/listQuery',
          component: CustomizelistQuery,
          meta: {
            title: '撞单查询'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/customer/:tabType/:id',
          component: CustSummary,
          meta: {
            title: '客户'
          }
        }
      ]
    }, {
      path: 'email',
      component: email,
      children: [
        {
          path: '',
          component: Blank,
          meta: {
            title: '邮件'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/email/:tabType/:id',
          component: EmailSummary,
          meta: {
            title: '邮件'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/email/:tabType/:id/email_jump',
          component: EmailSummary,
          meta: {
            title: '邮件'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/email/add',
          component: AddCustomer,
          meta: {
            title: '添加客户'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/email/merge',
          component: MergeCustomers,
          meta: {
            title: '合并客户'
          }
        }
      ]
    }, {
      path: 'call',
      component: call,
      children: [
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/call/cdr_call/add/:tel/:label/:id',
          component: AddCustomer,
          meta: {
            title: '添加客户'
          }
        },
        {
          path: '/index/call/:tabName',
          component: CdrCallBlank,
          meta: {
            title: '通话'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/call/:tabType/:id/',
          component: CallSummary,
          meta: {
            title: '通话'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/call/:tabType/:id/cdr',
          component: CdrCallSummary,
          meta: {
            title: '来电'
          }
        }
      ]
    }, {
      path: 'webchat',
      component: webchat,
      children: [
        {
          path: '',
          component: Blank,
          meta: {
            title: '在线咨询'
          }
        },
        {
          path: '/index/webchat/:tabName',
          component: Blank,
          meta: {
            title: '在线咨询'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/webchat/:tabType/:id/webchat',
          component: WebchatSummary,
          meta: {
            title: '在线咨询'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/webchat/add',
          component: AddCustomer,
          meta: {
            title: '添加客户'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/webchat/merge',
          component: MergeCustomers,
          meta: {
            title: '合并客户'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/webchat/:tabType/:id',
          component: WebchatSummary,
          meta: {
            title: '在线咨询'
          }
        }
      ]
    }, {
      path: 'workbench',
      name: 'workbench',
      component: workbench,
      meta: {
        title: '工作台'
      }
    }, {
      path: 'report',
      name: 'report',
      component: report,
      meta: {
        title: '报表'
      },
      children: routerReport
    }, {
      path: 'monitor',
      name: 'monitor',
      component: monitor,
      meta: {
        title: '监控'
      },
      children: [
        {
          path: 'table',
          component: monitorTable,
          meta: {
            title: '监控'
          }
        },
        {
          path: 'chart',
          component: monitorChart,
          meta: {
            title: '监控'
          }
        }
      ]
    }, {
      path: 'questionnaire',
      component: questionnaire,
      meta: {
        title: '问卷调查'
      },
      children: [
        {
          path: '',
          component: Blank,
          meta: {
            title: '问卷调查'
          }
        },
        {
          // 当 /user/:id/profile 匹配成功，
          // UserProfile 会被渲染在 User 的 <router-view> 中
          path: '/index/questionnaire/:tabType/:id',
          component: questionSummary,
          meta: {
            title: '问卷调查'
          }
        },
        {
          path: '/index/questionnaire/distribute',
          component: questionDistribute,
          meta: {
            title: '问卷调查'
          }
        }
      ]
    }, {
      path: 'qualityCheck',
      name: 'qualityCheck',
      component: qualityCheck,
      meta: {
        title: '质检'
      },
      children: [
        {
          path: 'quality_check',
          redirect: 'quality_check/normal'
        },
        {
          path: 'quality_check/:tabTypes',
          component: qualityCheckDetail,
          meta: {
            title: '质检'
          }
        },
        {
          path: 'quality_check_result',
          component: qualityCheckResult,
          meta: {
            title: '质检'
          }
        },
        {
          path: 'quality_check_agent',
          component: qualityCheckAgent,
          meta: {
            title: '质检'
          }
        },
        {
          path: 'quality_check_task',
          component: qualityCheckTask,
          meta: {
            title: '质检'
          }
        },
        {
          path: 'quality_check_cycle',
          component: qualityCheckCycle,
          meta: {
            title: '质检'
          }
        }
      ]
    }, {
      path: 'misscall',
      name: 'misscall',
      component: misscall,
      meta: {
        title: '未接来电'
      }
    }, {
      path: 'sms',
      name: 'sms',
      component: sms,
      meta: {
        title: '短信'
      },
      children: [
        {
          path: '',
          component: Blank,
          meta: {
            title: '短信'
          }
        },
        {
          path: ':tabName/task/:id',
          component: smsImportDetail,
          meta: {
            title: '导入群发短信'
          }
        },
        {
          path: ':tabName/addTemplate',
          component: smsImportAddTemplate,
          meta: {
            title: '导入群发短信'
          }
        },
        {
          path: 'template',
          component: smsTemplate,
          meta: {
            title: '短信模板管理'
          }
        }
      ]
    }, {
      path: 'interface',
      name: 'urlInterface',
      component: urlInterface,
      meta: {
        title: '首页对接'
      }
    }, {
      path: 'config',
      name: 'config',
      component: config,
      meta: {
        title: '设置'
      }
    }
  ]
}, {
  path: '*',
  redirect: to => {
    // 方法接收 目标路由 作为参数
    // return 重定向的 字符串路径/路径对象
    popCount++
    if (to.path === '/') {
      return './login'
    }
    let path = to.path.split('/')
    for (let i = 0; i < popCount; i++) {
      path.pop()
    }
    return path.join('/')
  }
}]

export default routers
